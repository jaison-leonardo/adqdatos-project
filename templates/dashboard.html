<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard IoT - Panel de Control</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/styles.css')}}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
</head>
<body>
    <!-- Partículas animadas -->
    <div class="particles" id="particles"></div>

    <!-- Barra de navegación -->
    <nav class="navbar">
        <div class="nav-content">
            <a href="#" class="nav-brand">
                <div class="logo">⚡</div>
                <span>Dashboard IoT</span>
            </a>
            <ul class="nav-links">
                 <li><a href="{{ url_for('dashboard') }}" class="nav-link active">Dashboard</a></li>
                <li><a href="{{ url_for('dispositivos') }}" class="nav-link">Dispositivos</a></li>
                <li><a href="{{ url_for('configuracion') }}" class="nav-link">Configuración</a></li>
                <li><a href="{{ url_for('index') }}" class="nav-link">Cerrar Sesión</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Encabezado del dashboard -->
        <div class="text-center dashboard-section">
            <h1 class="section-title">Panel de Control IoT</h1>
            <p class="section-subtitle">Monitoreo en tiempo real de los dispositivos conectados</p>
        </div>

        <!-- Indicadores principales -->
        <div class="grid grid-4 dashboard-section">
            <div class="card text-center">
                <div class="metric-value" id="activeDevices">0</div>
                <div class="metric-label">Dispositivos Activos</div>
                <div class="status-dot" style="margin: 10px auto 0;"></div>
            </div>
            <div class="card text-center">
                <div class="metric-value" id="uptime">0%</div>
                <div class="metric-label">Tiempo de Actividad</div>
                <div class="status-dot" style="margin: 10px auto 0;"></div>
            </div>
        </div>

        <!-- Gráficas de series temporales -->
        <div class="dashboard-section">
            <h2 class="section-title">Monitoreo en Tiempo Real</h2>
            
            <!-- Temperatura -->
            <div class="card" style="margin-bottom: 1.5rem;">
                <div class="card-header">
                    <div class="card-title">Temperatura en Tiempo Real</div>
                    <div class="card-subtitle">Sensores IoT - Últimas 24 horas</div>
                </div>
                <div id="temperatureChart" style="height: 400px;"></div>
            </div>

            <div class="grid grid-2">
                <!-- Humedad del ambiente -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Humedad Relativa del Ambiente</div>
                        <div class="card-subtitle">Porcentaje por dispositivo</div>
                    </div>
                    <div id="ambientHumidityChart" style="height: 350px;"></div>
                </div>

                <!-- Humedad del suelo -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Humedad del Suelo</div>
                        <div class="card-subtitle">Porcentaje por sensor</div>
                    </div>
                    <div id="soilHumidityChart" style="height: 350px;"></div>
                </div>
            </div>
        </div>

        <!-- Selector de dispositivo y tacómetros -->
        <div class="dashboard-section">
            <h2 class="section-title">Monitoreo Individual por Dispositivo</h2>
            
            <div class="device-selector text-center">
                <select id="deviceSelector">
                    <option value="">Seleccionar dispositivo...</option>
                </select>
            </div>

            <div class="grid grid-3" id="tachometersContainer">
                <!-- Tacómetro Humedad Ambiente -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Humedad Ambiente</div>
                        <div class="card-subtitle">Porcentaje actual</div>
                    </div>
                    <div id="ambientHumidityGauge" style="height: 300px;"></div>
                </div>

                <!-- Tacómetro Temperatura -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Temperatura</div>
                        <div class="card-subtitle">Grados Celsius</div>
                    </div>
                    <div id="temperatureGauge" style="height: 300px;"></div>
                </div>

                <!-- Tacómetro Humedad Suelo -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Humedad del Suelo</div>
                        <div class="card-subtitle">Porcentaje actual</div>
                    </div>
                    <div id="soilHumidityGauge" style="height: 300px;"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="{{url_for('static', filename='js/dashboard.js')}}"></script>
</body>
</html>